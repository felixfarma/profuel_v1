<!-- templates/dashboard.html -->

{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Bienvenido, {{ current_user.email }}</h2>

  <!-- Indicadores generales -->
  <div class="row mb-4">
    <div class="col">
      <strong>BMR:</strong> {{ bmr|round(1) }} kcal/d
    </div>
    <div class="col">
      <strong>TDEE:</strong> {{ tdee|round(1) }} kcal/d
    </div>
    <div class="col">
      <strong>Total hoy:</strong> {{ total_kcal|round(1) }} kcal
    </div>
  </div>

  <!-- Listado de comidas del día -->
  <h4>Comidas de hoy</h4>
  {% if meals %}
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Hora</th>
          <th>Nombre</th>
          <th>Tipo</th>
          <th>Kcal</th>
          <th>Proteína</th>
          <th>Carbos</th>
          <th>Grasas</th>
        </tr>
      </thead>
      <tbody>
        {% for meal in meals %}
        <tr>
          <td>{{ meal.date.strftime('%H:%M') if meal.date else '' }}</td>
          <td>{{ meal.name }}</td>
          <td>{{ meal.meal_type }}</td>
          <td>{{ meal.kcal|round(1) }}</td>
          <td>{{ meal.protein|round(1) }}</td>
          <td>{{ meal.carbs|round(1) }}</td>
          <td>{{ meal.fat|round(1) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">
      Aún no has añadido comidas hoy. 
      <a href="{{ url_for('auth.add_meal') }}">Añadir ahora</a>
    </p>
  {% endif %}

  <a href="{{ url_for('auth.add_meal') }}" class="btn btn-primary mt-3">
    Añadir comida
  </a>
</div>
{% endblock %}
